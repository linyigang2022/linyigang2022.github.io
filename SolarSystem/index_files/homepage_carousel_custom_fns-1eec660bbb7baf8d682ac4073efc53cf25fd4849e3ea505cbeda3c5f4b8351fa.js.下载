var homepage_slider={themes:"",windowWidth:null,widthOfRectangles:null,windowHeight:null,left_rect:null,right_rect:null,ie_8_checked:!1,slider:null,stopped:!1,homepage_slider_options:{width:null,layout:"fullscreen",space:0,fullscreenMargin:0,autoplay:!0,overPause:!1,endPause:!1,speed:30,mouse:!1,center:!0,centerControls:!1,instantStartLayers:!0,loop:!0},init:function(){console.log("homepage_slider.init()"),homepage_slider.slider=new MasterSlider,homepage_slider.initWidths(),homepage_slider.homepage_slider_options.fullscreenMargin=$("section.more_bar").height(),homepage_slider.swipe=$("#masterslider").find(".ms-slide").length>1,$("body").addClass("has_themified_carsouel"),this.snotFullscreen()&&(console.log("carousel not fullscreen"),homepage_slider.homepage_slider_options={layout:"autofill",space:0,autoplay:!0,overPause:!1,endPause:!1,speed:30,mouse:!1,center:!0,centerControls:!0,instantStartLayers:!0,loop:!0,layersMode:"full",swipe:$("#masterslider").find(".ms-slide").length>1}),$("#masterslider").find(".ms-slide").length>1&&(homepage_slider.slider.control("arrows"),homepage_slider.slider.control("bullets")),homepage_slider.slider.setup("masterslider",homepage_slider.homepage_slider_options),homepage_slider.initListeners()},initWidths:function(){homepage_slider.windowWidth=$(window).width(),homepage_slider.widthOfRectangles=homepage_slider.windowWidth/5,homepage_slider.windowHeight=$(window).height(),homepage_slider.left_rect={x1:0,y1:0,x2:homepage_slider.widthOfRectangles,y2:homepage_slider.windowHeight},homepage_slider.right_rect={x1:homepage_slider.windowWidth-homepage_slider.widthOfRectangles,y1:0,x2:homepage_slider.windowWidth,y2:homepage_slider.windowHeight},homepage_slider.homepage_slider_options.width=homepage_slider.windowWidth,homepage_slider.homepage_slider_options.height=homepage_slider.windowHeight},initListeners:function(){homepage_slider.slider.api.addEventListener(MSSliderEvent.INIT,(function(){console.log("masterslider int complete"),mb_utils.mobileAndTabletCheck()?($(".ms-bullet").click((function(){homepage_slider.slider.api.pause()})),$(".ms-nav-prev").on("touchstart",(function(e){e.preventDefault(),homepage_slider.stopCarousel()})),$(".ms-nav-next").on("touchstart",(function(e){e.preventDefault(),homepage_slider.stopCarousel()})),$("span.arrow").off().on("touchstart",(function(){$("body").toggleClass("floating_text_area_open"),$(this).parent().parent().toggleClass("open"),$(this).parent().parent().find(".description").slideToggle(),homepage_slider.slider.api.pause()})),$(".ms-slide-vpbtn").attr("style","display: none!important;"),homepage_slider.changeTheme()):($(".ms-nav-prev").on("click",(function(e){e.preventDefault(),homepage_slider.stopCarousel()})),$(".ms-nav-next").on("click",(function(e){e.preventDefault(),homepage_slider.stopCarousel()})),$("span.arrow").off().on("click",(function(){$("body").toggleClass("floating_text_area_open"),$(this).parent().parent().toggleClass("open"),$(this).parent().parent().find(".description").slideToggle(),homepage_slider.slider.api.pause()}))),$(".ms-slide .floating_text_area").hover(homepage_slider.onTextArea,homepage_slider.offTextArea),homepage_slider.changeTheme()})),homepage_slider.slider.api.addEventListener(MSSliderEvent.CHANGE_START,(function(){if(homepage_slider.changeTheme(),!this.ie_8_checked){this.ie_8_checked=!0;var e=mb_utils.getIEVersion();e.major<=8&&e.major>0&&$(".master-slider source").length>0&&(console.log("source bad for ie8"),$(".master-slider").first().prepend($(".master-slider .ms-container")))}})),homepage_slider.slider.api.addEventListener(MSSliderEvent.RESIZE,(function(){homepage_slider.resizeCarousel()})),$(window).on("orientationchange",(function(){setTimeout((function(){console.log("orientation resize"),$("#masterslider").trigger("resize")}),800)}))},changeTheme:function(){var e=homepage_slider.slider.api.index(),i=$(".slide-"+(e+1)).first();if(i.length>0){$("body").removeClass(homepage_slider.themes);var s=i.data("body-class");s&&(homepage_slider.last_body_class=s,$("body").addClass(s))}},pointRectangleIntersection:function(e,i){return e.x>i.x1&&e.x<i.x2&&e.y>i.y1&&e.y<i.y2},stopCarousel:function(){homepage_slider.stopped=!0,homepage_slider.slider.api.pause()},onTextArea:function(){homepage_slider.slider.api.pause()},offTextArea:function(){homepage_slider.stopped||homepage_slider.slider.api.resume()},determineThemeOptions:function(){try{var e=window.getComputedStyle(document.querySelector(".homepage_carousel"),":after").getPropertyValue("content").replace(/[^a-z,]*/g,"").split(",");homepage_slider.themes=e.join(" ")}catch(e){console.log(" Error getting themes: "+e.message)}},resizeCarousel:function(){var e=$(".ms-container").parent().width();if($(".ms-container").css("max-width",e),$(".ms-view").css("left","0"),$(".ms-slide-layers").css("max-width",e),$(".ms-slide-layers").css("left","0"),!this.snotFullscreen()){var i=$(window).height()-$("section.more_bar").height();$("#masterslider.ms-android").height(i),$("#masterslider.ms-android .ms-slide-layers").height(i),$("#masterslider.ms-android .ms-slide").height(i),$("#masterslider.ms-android .ms-view").height(i)}},snotFullscreen:function(){var e=$("#masterslider").parents("#feature");if(e.length>0){var i=e.data("full");return void 0!==i&&"no"==i}return!1}};$((function(){homepage_slider.determineThemeOptions(),homepage_slider.init()})),$(document).load((function(){homepage_slider.resizeCarousel()}));